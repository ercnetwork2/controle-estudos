<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Controle de Matérias Estudadas</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header h1 {
            color: #333;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }

        .stats {
            display: flex;
            gap: 30px;
        }

        .stat-card {
            text-align: center;
        }

        .stat-number {
            font-size: 32px;
            font-weight: bold;
            color: #667eea;
        }

        .stat-label {
            font-size: 12px;
            color: #999;
            text-transform: uppercase;
            margin-top: 5px;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }

        .card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .card-title {
            font-size: 18px;
            color: #333;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .form-section {
            margin-bottom: 25px;
        }

        .form-section h3 {
            font-size: 14px;
            color: #666;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            font-size: 12px;
            color: #666;
            margin-bottom: 5px;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #f0f0f0;
            color: #666;
        }

        .btn-secondary:hover {
            background: #e0e0e0;
        }

        .btn-add-subject {
            background: #4CAF50;
            color: white;
            padding: 8px 16px;
            font-size: 13px;
            margin-top: 10px;
        }

        .btn-add-subject:hover {
            background: #45a049;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.3);
        }

        .subjects-list {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }

        .subject-tag {
            background: #f0f4ff;
            color: #667eea;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 13px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .subject-tag .remove {
            cursor: pointer;
            color: #999;
            font-weight: bold;
            transition: color 0.3s;
        }

        .subject-tag .remove:hover {
            color: #ff4444;
        }

        .study-list {
            max-height: 400px;
            overflow-y: auto;
        }

        .study-day {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .study-day-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-weight: 600;
            color: #333;
        }

        .study-entry {
            background: white;
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .study-entry-info {
            flex: 1;
        }

        .study-entry-subject {
            font-weight: 600;
            color: #667eea;
            font-size: 13px;
        }

        .study-entry-content {
            color: #666;
            font-size: 12px;
            margin-top: 3px;
        }

        .study-entry-time {
            color: #999;
            font-size: 11px;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            animation: fadeIn 0.3s;
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            border-radius: 15px;
            padding: 30px;
            max-width: 400px;
            width: 90%;
            animation: slideUp 0.3s;
        }

        .modal-header {
            margin-bottom: 20px;
        }

        .modal-title {
            font-size: 20px;
            color: #333;
        }

        .modal-footer {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
            margin-top: 20px;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideUp {
            from {
                transform: translateY(30px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .empty-state {
            text-align: center;
            padding: 40px;
            color: #999;
        }

        .empty-state-icon {
            font-size: 48px;
            margin-bottom: 15px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>
                <div class="logo">📚</div>
                Controle de Matérias Estudadas
            </h1>
            <div class="stats">
                <div class="stat-card">
                    <div class="stat-number" id="totalHours">0</div>
                    <div class="stat-label">Horas Totais</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="totalDays">0</div>
                    <div class="stat-label">Dias Estudados</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="totalSubjects">0</div>
                    <div class="stat-label">Matérias</div>
                </div>
            </div>
        </div>

        <div class="main-content">
            <div class="card">
                <h2 class="card-title">
                    ➕ Adicionar Dados de Estudo
                </h2>

                <div class="form-section">
                    <h3>📅 Data e Horário</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Data</label>
                            <input type="date" id="studyDate" value="">
                        </div>
                        <div class="form-group">
                            <label>Horário de Início</label>
                            <input type="time" id="startTime">
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <h3>📚 Matéria e Conteúdo</h3>
                    <div class="form-group">
                        <label>Matéria</label>
                        <select id="subjectSelect">
                            <option value="">Selecione uma matéria...</option>
                        </select>
                        <button class="btn btn-add-subject" onclick="openSubjectModal()">
                            + Adicionar Nova Matéria
                        </button>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Duração (minutos)</label>
                            <input type="number" id="duration" min="1" placeholder="30">
                        </div>
                        <div class="form-group">
                            <label>Tipo de Estudo</label>
                            <select id="studyType">
                                <option value="leitura">Leitura</option>
                                <option value="revisao">Revisão</option>
                                <option value="exercicios">Exercícios</option>
                                <option value="videoaula">Videoaula</option>
                                <option value="resumo">Resumo</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Conteúdo Estudado</label>
                        <textarea id="content" rows="3" placeholder="Descreva o que foi estudado..."></textarea>
                    </div>
                </div>

                <div class="form-section">
                    <h3>📝 Observações (Opcional)</h3>
                    <div class="form-group">
                        <textarea id="observations" rows="2" placeholder="Adicione observações ou lembretes..."></textarea>
                    </div>
                </div>

                <button class="btn btn-primary" onclick="addStudyEntry()" style="width: 100%;">
                    Adicionar Registro de Estudo
                </button>
            </div>

            <div class="card">
                <h2 class="card-title">
                    📊 Histórico de Estudos
                </h2>
                
                <div class="form-section">
                    <h3>🏷️ Matérias Cadastradas</h3>
                    <div class="subjects-list" id="subjectsList"></div>
                </div>

                <div class="form-section">
                    <h3>📖 Registros Recentes</h3>
                    <div class="study-list" id="studyList">
                        <div class="empty-state">
                            <div class="empty-state-icon">📚</div>
                            <p>Nenhum registro de estudo ainda</p>
                            <p style="font-size: 12px; margin-top: 10px;">Comece adicionando seu primeiro registro!</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para Adicionar Nova Matéria -->
    <div class="modal" id="subjectModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Adicionar Nova Matéria</h3>
            </div>
            <div class="form-group">
                <label>Nome da Matéria</label>
                <input type="text" id="newSubjectName" placeholder="Ex: Direito Constitucional">
            </div>
            <div class="form-group">
                <label>Cor (Opcional)</label>
                <input type="color" id="newSubjectColor" value="#667eea">
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeSubjectModal()">Cancelar</button>
                <button class="btn btn-primary" onclick="addNewSubject()">Adicionar</button>
            </div>
        </div>
    </div>

    <script>
        // Estado da aplicação
        let appState = {
            subjects: [
                { id: 1, name: 'Empresarial', color: '#667eea' },
                { id: 2, name: 'Lei das S/A', color: '#764ba2' },
                { id: 3, name: 'Processo Civil', color: '#4CAF50' },
                { id: 4, name: 'Direito Constitucional', color: '#FF9800' },
                { id: 5, name: 'Direito Penal', color: '#F44336' }
            ],
            studyData: []
        };

        // Inicialização
        document.addEventListener('DOMContentLoaded', function() {
            // Carregar dados do localStorage
            loadData();
            
            // Definir data de hoje
            document.getElementById('studyDate').value = new Date().toISOString().split('T')[0];
            
            // Atualizar interface
            updateSubjectsList();
            updateSubjectSelect();
            updateStudyList();
            updateStats();
        });

        // Funções de Persistência
        function saveData() {
            localStorage.setItem('studyAppState', JSON.stringify(appState));
        }

        function loadData() {
            const saved = localStorage.getItem('studyAppState');
            if (saved) {
                appState = JSON.parse(saved);
            }
        }

        // Funções de Matérias
        function openSubjectModal() {
            document.getElementById('subjectModal').classList.add('active');
            document.getElementById('newSubjectName').focus();
        }

        function closeSubjectModal() {
            document.getElementById('subjectModal').classList.remove('active');
            document.getElementById('newSubjectName').value = '';
        }

        function addNewSubject() {
            const name = document.getElementById('newSubjectName').value.trim();
            const color = document.getElementById('newSubjectColor').value;
            
            if (!name) {
                alert('Por favor, insira o nome da matéria');
                return;
            }
            
            // Verificar se já existe
            if (appState.subjects.some(s => s.name.toLowerCase() === name.toLowerCase())) {
                alert('Esta matéria já está cadastrada');
                return;
            }
            
            // Adicionar nova matéria
            const newSubject = {
                id: Date.now(),
                name: name,
                color: color
            };
            
            appState.subjects.push(newSubject);
            saveData();
            
            // Atualizar interface
            updateSubjectsList();
            updateSubjectSelect();
            
            // Selecionar a nova matéria automaticamente
            document.getElementById('subjectSelect').value = newSubject.id;
            
            closeSubjectModal();
        }

        function removeSubject(subjectId) {
            if (confirm('Tem certeza que deseja remover esta matéria?')) {
                appState.subjects = appState.subjects.filter(s => s.id !== subjectId);
                saveData();
                updateSubjectsList();
                updateSubjectSelect();
                updateStats();
            }
        }

        // Funções de Estudo
        function addStudyEntry() {
            const date = document.getElementById('studyDate').value;
            const startTime = document.getElementById('startTime').value;
            const subjectId = document.getElementById('subjectSelect').value;
            const duration = parseInt(document.getElementById('duration').value);
            const studyType = document.getElementById('studyType').value;
            const content = document.getElementById('content').value.trim();
            const observations = document.getElementById('observations').value.trim();
            
            // Validação
            if (!date || !startTime || !subjectId || !duration || !content) {
                alert('Por favor, preencha todos os campos obrigatórios');
                return;
            }
            
            // Encontrar a matéria
            const subject = appState.subjects.find(s => s.id == subjectId);
            if (!subject) {
                alert('Matéria não encontrada');
                return;
            }
            
            // Encontrar ou criar entrada para o dia
            let dayEntry = appState.studyData.find(d => d.date === date);
            if (!dayEntry) {
                const dateObj = new Date(date + 'T00:00:00');
                const dayNames = ['Domingo', 'Segunda', 'Terça', 'Quarta', 'Quinta', 'Sexta', 'Sábado'];
                
                dayEntry = {
                    date: date,
                    dayName: dayNames[dateObj.getDay()],
                    totalHours: 0,
                    entries: [],
                    observations: []
                };
                appState.studyData.push(dayEntry);
            }
            
            // Adicionar entrada de estudo
            const entry = {
                time: startTime,
                duration: duration,
                subject: subject.name,
                subjectColor: subject.color,
                studyType: studyType,
                content: content
            };
            
            dayEntry.entries.push(entry);
            
            // Adicionar observação se houver
            if (observations) {
                dayEntry.observations.push({
                    time: startTime,
                    text: observations
                });
            }
            
            // Recalcular total de horas do dia
            dayEntry.totalHours = dayEntry.entries.reduce((sum, e) => sum + e.duration, 0) / 60;
            
            // Ordenar dias por data (mais recente primeiro)
            appState.studyData.sort((a, b) => new Date(b.date) - new Date(a.date));
            
            // Salvar e atualizar interface
            saveData();
            updateStudyList();
            updateStats();
            
            // Limpar formulário
            document.getElementById('startTime').value = '';
            document.getElementById('duration').value = '';
            document.getElementById('content').value = '';
            document.getElementById('observations').value = '';
            
            // Feedback visual
            alert('Registro de estudo adicionado com sucesso!');
        }

        // Funções de Atualização da Interface
        function updateSubjectsList() {
            const container = document.getElementById('subjectsList');
            
            if (appState.subjects.length === 0) {
                container.innerHTML = '<p style="color: #999; font-size: 13px;">Nenhuma matéria cadastrada ainda</p>';
                return;
            }
            
            container.innerHTML = appState.subjects.map(subject => `
                <div class="subject-tag" style="background: ${subject.color}20; color: ${subject.color};">
                    ${subject.name}
                    <span class="remove" onclick="removeSubject(${subject.id})">×</span>
                </div>
            `).join('');
        }

        function updateSubjectSelect() {
            const select = document.getElementById('subjectSelect');
            const currentValue = select.value;
            
            select.innerHTML = '<option value="">Selecione uma matéria...</option>' +
                appState.subjects.map(subject => 
                    `<option value="${subject.id}">${subject.name}</option>`
                ).join('');
            
            // Restaurar seleção se ainda existir
            if (currentValue && appState.subjects.some(s => s.id == currentValue)) {
                select.value = currentValue;
            }
        }

        function updateStudyList() {
            const container = document.getElementById('studyList');
            
            if (appState.studyData.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">📚</div>
                        <p>Nenhum registro de estudo ainda</p>
                        <p style="font-size: 12px; margin-top: 10px;">Comece adicionando seu primeiro registro!</p>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = appState.studyData.slice(0, 10).map(day => `
                <div class="study-day">
                    <div class="study-day-header">
                        <span>${formatDate(day.date)} - ${day.dayName}</span>
                        <span>${day.totalHours.toFixed(1)}h</span>
                    </div>
                    ${day.entries.map(entry => `
                        <div class="study-entry">
                            <div class="study-entry-info">
                                <div class="study-entry-subject" style="color: ${entry.subjectColor || '#667eea'}">
                                    ${entry.subject} • ${getStudyTypeLabel(entry.studyType)}
                                </div>
                                <div class="study-entry-content">${entry.content}</div>
                                <div class="study-entry-time">${entry.time} • ${entry.duration} min</div>
                            </div>
                        </div>
                    `).join('')}
                    ${day.observations.length > 0 ? `
                        <div style="margin-top: 10px; padding: 10px; background: #fff9c4; border-radius: 8px;">
                            <div style="font-size: 11px; color: #f57c00; font-weight: 600; margin-bottom: 5px;">📝 Observações</div>
                            ${day.observations.map(obs => `
                                <div style="font-size: 12px; color: #666;">${obs.text}</div>
                            `).join('')}
                        </div>
                    ` : ''}
                </div>
            `).join('');
        }

        function updateStats() {
            // Calcular estatísticas
            let totalHours = 0;
            let totalDays = appState.studyData.length;
            let subjectsStudied = new Set();
            
            appState.studyData.forEach(day => {
                totalHours += day.totalHours;
                day.entries.forEach(entry => {
                    subjectsStudied.add(entry.subject);
                });
            });
            
            // Atualizar interface
            document.getElementById('totalHours').textContent = Math.round(totalHours);
            document.getElementById('totalDays').textContent = totalDays;
            document.getElementById('totalSubjects').textContent = subjectsStudied.size;
        }

        // Funções Auxiliares
        function formatDate(dateStr) {
            const date = new Date(dateStr + 'T00:00:00');
            return date.toLocaleDateString('pt-BR', { day: '2-digit', month: '2-digit' });
        }

        function getStudyTypeLabel(type) {
            const labels = {
                'leitura': 'Leitura',
                'revisao': 'Revisão',
                'exercicios': 'Exercícios',
                'videoaula': 'Videoaula',
                'resumo': 'Resumo'
            };
            return labels[type] || type;
        }

        // Fechar modal ao clicar fora
        document.getElementById('subjectModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeSubjectModal();
            }
        });

        // Atalho de teclado para adicionar matéria (Ctrl+M)
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey && e.key === 'm') {
                e.preventDefault();
                openSubjectModal();
            }
        });
    </script>
</body>
</html>
